<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yan.dao.UserDao">
<resultMap id="baseMap" type="com.yan.entity.User">
        <id column="id" jdbcType="INTEGER" property="id" />
</resultMap>
<select id="getByPage"  resultMap="baseMap">
	SELECT * FROM User limit #{startRow},#{endRow}  
</select>
<select id="getTotal"  resultType="long">
	SELECT count(id) FROM User 
</select>
<select id="login"  resultMap="baseMap">
	SELECT * FROM User where account=#{account} and password=#{password} and role=#{role}
</select>
<select id="searchById"  resultMap="baseMap">
	SELECT * FROM User where id=#{id}
</select>
<insert id="insert" parameterType="com.yan.entity.User">
insert into User(name,role,phone,account,password) 
values(#{name},#{role},#{phone},#{account},#{password});
</insert>
<delete id="delete" parameterType="java.lang.Integer" >
    delete from User where id = #{id}
  </delete>

<update id="updateById">
	update User
	<set>
	<if test="name !=null and name !=''">name=#{name},</if>
	<if test="role !=null and role !=''">role=#{role},</if>
	<if test="phone !=null and phone !=''">phone=#{phone},</if>
	<if test="account !=null and account !=''">account=#{account},</if>
	<if test="password !=null and password !=''">password=#{password},</if>
	</set>
	where Id=${id}
</update>

</mapper>